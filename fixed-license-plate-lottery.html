



<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="杰克飞的博客" href="https://120115.xyz/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="杰克飞的博客" href="https://120115.xyz/atom.xml" />
<link rel="alternate" type="application/json" title="杰克飞的博客" href="https://120115.xyz/feed.json" />



<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  

<link rel="canonical" href="https://120115.xyz/fixed-license-plate-lottery">



  <title> |
梦想书架 = 杰克飞的博客 = 首页</title>
  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/aplayer/1.10.1/APlayer.min.css">
<meta name="generator" content="Hexo 7.3.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">
  </h1>

          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="切换导航栏">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">梦想书架</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giclimtf7dj20zk0m8qav.jpg"></li>
          <li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipeyvx1d4j20zk0m8hdt.jpg"></li>
          <li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gicliwyw55j20zk0m8hdt.jpg"></li>
          <li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipeybxm1pj20zk0m8niv.jpg"></li>
          <li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giclwuom7cj20zk0m8dvn.jpg"></li>
          <li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giclh3brzpj20zk0m8ann.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="page wrap">
    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN">
  <link itemprop="mainEntityOfPage" href="https://120115.xyz/fixed-license-plate-lottery.html">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/source/images/avatar.jpg">
    <meta itemprop="name" content="杰克飞">
    <meta itemprop="description" content="首页, 一个用Hexo搭建的个人博客">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="杰克飞的博客">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>机动车车牌摇号系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- 配置Tailwind自定义颜色和字体 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1E40AF', // 深蓝色作为主色调
                        secondary: '#DC2626', // 红色作为辅助色
                        neutral: '#F3F4F6', // 浅灰色作为中性色
                        plate: '#F5F5DC', // 车牌底色
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .plate-border {
                border: 2px solid #000;
                border-radius: 5px;
            }
            .char-box {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                width: 30px;
                height: 40px;
                margin: 0 1px;
                font-weight: bold;
                font-family: "SimHei", "Microsoft YaHei", sans-serif;
            }
            .plate-item {
                transition: all 0.2s ease;
            }
            .plate-item:hover {
                transform: scale(1.05);
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            }
            .plate-item.selected {
                border-color: #1E40AF;
                background-color: rgba(30, 64, 175, 0.1);
            }
            .豹子号 {
                position: relative;
            }
            .豹子号::after {
                content: "豹子号";
                position: absolute;
                top: -10px;
                right: -10px;
                background-color: #DC2626;
                color: white;
                font-size: 10px;
                padding: 1px 4px;
                border-radius: 3px;
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen font-sans">
    <!-- 页面头部 -->
    <header class="bg-primary text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center mb-4 md:mb-0">
                    <i class="fa fa-car text-3xl mr-4" aria-hidden="true"></i>
                    <h1 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold">机动车车牌摇号系统</h1>
                </div>
                <div class="text-center md:text-right">
                    <p class="text-lg">当前期数: <span id="current-phase" class="font-bold">202308</span></p>
                    <p class="text-sm opacity-80">模拟系统 · 仅供演示</p>
                </div>
            </div>
        </div>
    </header>

    <!-- 主要内容区 -->
    <main class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- 左侧信息区 -->
            <div class="lg:col-span-1 space-y-6">
                <!-- 地区选择 -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold text-primary mb-4 flex items-center">
                        <i class="fa fa-map-marker mr-2" aria-hidden="true"></i>地区选择
                    </h2>
                    <div class="space-y-4">
                        <div>
                            <label for="province" class="block text-sm font-medium text-gray-700 mb-1">选择省份</label>
                            <select id="province" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
                                <option value="">请选择省份</option>
                                <!-- 省份选项将通过JS动态生成 -->
                            </select>
                        </div>
                        <div>
                            <label for="city" class="block text-sm font-medium text-gray-700 mb-1">选择城市</label>
                            <select id="city" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" disabled>
                                <option value="">请先选择省份</option>
                                <!-- 城市选项将通过JS动态生成 -->
                            </select>
                        </div>
                        <div id="selected-prefix" class="hidden mt-4 p-3 bg-gray-50 rounded-md text-center">
                            <p class="text-sm text-gray-500">当前选择前缀</p>
                            <p id="prefix-display" class="text-2xl font-bold mt-1">豫K</p>
                        </div>
                    </div>
                </div>
                
                <!-- 摇号须知 -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold text-primary mb-4 flex items-center">
                        <i class="fa fa-info-circle mr-2" aria-hidden="true"></i>摇号须知
                    </h2>
                    <ul class="space-y-2 text-gray-700 text-sm">
                        <li class="flex items-start">
                            <i class="fa fa-check-circle text-green-500 mt-1 mr-2" aria-hidden="true"></i>
                            <span>每个用户每天可参与10次摇号</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check-circle text-green-500 mt-1 mr-2" aria-hidden="true"></i>
                            <span>每次摇号生成50个号码，包含1-2个豹子号</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check-circle text-green-500 mt-1 mr-2" aria-hidden="true"></i>
                            <span>可点击号码选择，再点击确认按钮保留</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check-circle text-green-500 mt-1 mr-2" aria-hidden="true"></i>
                            <span>本系统为模拟系统，结果不具备法律效力</span>
                        </li>
                    </ul>
                </div>
                
                <!-- 今日剩余次数 -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold text-primary mb-4 flex items-center">
                        <i class="fa fa-calendar-check-o mr-2" aria-hidden="true"></i>今日摇号次数
                    </h2>
                    <div class="flex items-center justify-center">
                        <div class="w-32 h-32 rounded-full bg-primary/10 flex items-center justify-center">
                            <span id="remaining-times" class="text-4xl font-bold text-primary">10</span>
                            <span class="text-xl ml-2 text-gray-600">次</span>
                        </div>
                    </div>
                    <p class="text-center mt-4 text-gray-500">今日剩余摇号次数</p>
                </div>
            </div>
            
            <!-- 中间摇号区 -->
            <div class="lg:col-span-3 space-y-6">
                <!-- 操作按钮区 -->
                <div class="bg-white rounded-lg shadow-md p-6 flex flex-col sm:flex-row justify-between items-center gap-4">
                    <h2 class="text-xl font-bold text-primary">摇号操作</h2>
                    <div class="flex gap-4 w-full sm:w-auto">
                        <button id="lottery-btn" class="bg-secondary hover:bg-secondary/90 text-white font-bold py-3 px-8 rounded-lg shadow transform transition duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-secondary/50 flex-1 sm:flex-none flex items-center justify-center" disabled>
                            <i class="fa fa-random mr-2" aria-hidden="true"></i>
                            开始摇号
                        </button>
                        <button id="confirm-btn" class="bg-primary hover:bg-primary/90 text-white font-bold py-3 px-8 rounded-lg shadow transform transition duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary/50 flex-1 sm:flex-none flex items-center justify-center" disabled>
                            <i class="fa fa-check mr-2" aria-hidden="true"></i>
                            确认选择
                        </button>
                    </div>
                </div>
                
                <!-- 摇号结果展示 -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold text-primary mb-6 flex items-center">
                        <i class="fa fa-trophy mr-2" aria-hidden="true"></i>摇号结果
                    </h2>
                    
                    <div id="result-message" class="text-center py-8 text-gray-500">
                        请先选择省份和城市，然后点击"开始摇号"按钮
                    </div>
                    
                    <!-- 车牌结果网格 -->
                    <div id="plates-container" class="grid grid-cols-5 sm:grid-cols-10 gap-3 hidden">
                        <!-- 车牌将通过JS动态生成 -->
                    </div>
                </div>
                
                <!-- 已选号码 -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold text-primary mb-4 flex items-center">
                        <i class="fa fa-star mr-2" aria-hidden="true"></i>已选号码
                    </h2>
                    
                    <div id="selected-plates" class="flex flex-wrap gap-3 min-h-[60px]">
                        <p class="text-gray-500 w-full text-center py-3">暂无选中的号码</p>
                    </div>
                </div>
                
                <!-- 历史记录 -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold text-primary mb-4 flex items-center">
                        <i class="fa fa-history mr-2" aria-hidden="true"></i>摇号历史记录
                    </h2>
                    
                    <div id="history-container" class="space-y-3 max-h-64 overflow-y-auto pr-2">
                        <!-- 历史记录将通过JS动态生成 -->
                        <p class="text-gray-500 text-center py-6">暂无摇号记录</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="bg-gray-800 text-white mt-12">
        <div class="container mx-auto px-4 py-6">
            <div class="text-center">
                <p>© 2023 机动车车牌摇号模拟系统 - 本系统仅作演示使用，不代表官方</p>
                <p class="text-sm opacity-70 mt-2">设计与开发 · 静态网页演示</p>
            </div>
        </div>
    </footer>

    <script>
        // 省份和城市数据 - 确保数据结构正确
        const provinceCityData = {
            "北京市": {
                "简称": "京",
                "城市": {
                    "北京市": "A"
                }
            },
            "天津市": {
                "简称": "津",
                "城市": {
                    "天津市": "A"
                }
            },
            "河北省": {
                "简称": "冀",
                "城市": {
                    "石家庄市": "A",
                    "唐山市": "B",
                    "秦皇岛市": "C",
                    "邯郸市": "D",
                    "邢台市": "E",
                    "保定市": "F",
                    "张家口市": "G",
                    "承德市": "H",
                    "沧州市": "J",
                    "廊坊市": "R",
                    "衡水市": "T"
                }
            },
            "河南省": {
                "简称": "豫",
                "城市": {
                    "郑州市": "A",
                    "开封市": "B",
                    "洛阳市": "C",
                    "平顶山市": "D",
                    "安阳市": "E",
                    "鹤壁市": "F",
                    "新乡市": "G",
                    "焦作市": "H",
                    "濮阳市": "J",
                    "许昌市": "K",
                    "漯河市": "L",
                    "三门峡市": "M",
                    "南阳市": "R",
                    "商丘市": "N",
                    "信阳市": "S",
                    "周口市": "P",
                    "驻马店市": "Q"
                }
            },
            "山东省": {
                "简称": "鲁",
                "城市": {
                    "济南市": "A",
                    "青岛市": "B",
                    "淄博市": "C",
                    "枣庄市": "D",
                    "东营市": "E",
                    "烟台市": "F",
                    "潍坊市": "G",
                    "济宁市": "H",
                    "泰安市": "J",
                    "威海市": "K",
                    "日照市": "L",
                    "莱芜市": "S",
                    "临沂市": "Q",
                    "德州市": "N",
                    "聊城市": "P",
                    "滨州市": "M",
                    "菏泽市": "R"
                }
            },
            "江苏省": {
                "简称": "苏",
                "城市": {
                    "南京市": "A",
                    "无锡市": "B",
                    "徐州市": "C",
                    "常州市": "D",
                    "苏州市": "E",
                    "南通市": "F",
                    "连云港市": "G",
                    "淮安市": "H",
                    "盐城市": "J",
                    "扬州市": "K",
                    "镇江市": "L",
                    "泰州市": "M",
                    "宿迁市": "N"
                }
            },
            "广东省": {
                "简称": "粤",
                "城市": {
                    "广州市": "A",
                    "深圳市": "B",
                    "珠海市": "C",
                    "汕头市": "D",
                    "佛山市": "E",
                    "韶关市": "F",
                    "湛江市": "G",
                    "肇庆市": "H",
                    "江门市": "J",
                    "茂名市": "K",
                    "惠州市": "L",
                    "梅州市": "M",
                    "汕尾市": "N",
                    "河源市": "P",
                    "阳江市": "Q",
                    "清远市": "R",
                    "东莞市": "S",
                    "中山市": "T",
                    "潮州市": "U",
                    "揭阳市": "V",
                    "云浮市": "W"
                }
            }
        };
        
        // 字母表（不含I和O，避免与数字混淆）
        const letters = 'ABCDEFGHJKLMNPQRSTUVWXYZ';
        // 数字
        const numbers = '0123456789';
        // 组合字符集（字母+数字）
        const chars = letters + numbers;
        
        // 页面元素
        const provinceSelect = document.getElementById('province');
        const citySelect = document.getElementById('city');
        const prefixDisplay = document.getElementById('prefix-display');
        const selectedPrefixEl = document.getElementById('selected-prefix');
        const lotteryBtn = document.getElementById('lottery-btn');
        const confirmBtn = document.getElementById('confirm-btn');
        const remainingTimesEl = document.getElementById('remaining-times');
        const platesContainer = document.getElementById('plates-container');
        const resultMessage = document.getElementById('result-message');
        const selectedPlatesEl = document.getElementById('selected-plates');
        const historyContainer = document.getElementById('history-container');
        
        // 状态变量
        let remainingTimes = 10;
        let isRolling = false;
        let selectedProvince = '';
        let selectedCity = '';
        let currentPrefix = '';
        let currentPlates = [];
        let selectedPlateIds = new Set();
        let historyRecords = [];
        
        // 初始化省份下拉列表 - 确保正确填充数据
        function initProvinceSelect() {
            // 先清除现有的省份选项（保留第一个"请选择省份"）
            while (provinceSelect.options.length > 1) {
                provinceSelect.remove(1);
            }
            
            // 直接添加省份选项，不做额外判断
            for (const province in provinceCityData) {
                if (provinceCityData.hasOwnProperty(province)) {
                    const option = document.createElement('option');
                    option.value = province;
                    option.textContent = province;
                    provinceSelect.appendChild(option);
                }
            }
        }
        
        // 处理省份选择变化
        function handleProvinceChange() {
            const province = provinceSelect.value;
            selectedProvince = province;
            
            // 先移除城市选择的事件监听器
            citySelect.removeEventListener('change', handleCityChange);
            
            // 清空城市选择
            citySelect.innerHTML = '';
            
            if (province && provinceCityData[province]) {
                // 启用城市选择
                citySelect.disabled = false;
                
                // 添加城市选项
                const cities = provinceCityData[province]['城市'];
                if (cities && Object.keys(cities).length > 0) {
                    for (const city in cities) {
                        const option = document.createElement('option');
                        option.value = city;
                        option.textContent = city;
                        citySelect.appendChild(option);
                    }
                } else {
                    const option = document.createElement('option');
                    option.value = '';
                    option.textContent = '无可用城市数据';
                    citySelect.appendChild(option);
                }
                
                // 绑定城市选择事件
                citySelect.addEventListener('change', handleCityChange);
            } else {
                // 禁用城市选择
                citySelect.disabled = true;
                const option = document.createElement('option');
                option.value = '';
                option.textContent = '请先选择省份';
                citySelect.appendChild(option);
                
                // 隐藏前缀显示
                selectedPrefixEl.classList.add('hidden');
                // 禁用摇号按钮
                lotteryBtn.disabled = true;
            }
        }
        
        // 处理城市选择变化
        function handleCityChange() {
            const city = citySelect.value;
            
            if (city && selectedProvince && provinceCityData[selectedProvince]) {
                selectedCity = city;
                // 获取前缀
                const provinceInfo = provinceCityData[selectedProvince];
                const cityCode = provinceInfo['城市'][city];
                currentPrefix = `${provinceInfo.简称}${cityCode}`;
                
                // 显示前缀
                prefixDisplay.textContent = currentPrefix;
                selectedPrefixEl.classList.remove('hidden');
                
                // 启用摇号按钮
                lotteryBtn.disabled = false;
            } else {
                // 隐藏前缀显示
                selectedPrefixEl.classList.add('hidden');
                // 禁用摇号按钮
                lotteryBtn.disabled = true;
            }
            
            // 重置选中的车牌
            resetSelectedPlates();
        }
        
        // 生成随机车牌后5位
        function generateRandomSuffix() {
            let suffix = '';
            for (let i = 0; i < 5; i++) {
                suffix += chars[Math.floor(Math.random() * chars.length)];
            }
            return suffix;
        }
        
        // 生成豹子号（后3位相同）
        function generateLuckySuffix() {
            // 前两位随机
            let suffix = '';
            for (let i = 0; i < 2; i++) {
                suffix += chars[Math.floor(Math.random() * chars.length)];
            }
            
            // 后三位相同
            const luckyChar = chars[Math.floor(Math.random() * chars.length)];
            suffix += luckyChar.repeat(3);
            
            return suffix;
        }
        
        // 开始摇号
        function startLottery() {
            console.log('startLottery函数被调用');
            if (isRolling) {
                console.log('摇号中，无法重复点击');
                return;
            }
            if (remainingTimes <= 0) {
                console.log('今日摇号次数已用完');
                return;
            }
            if (!currentPrefix) {
                console.log('请先选择省份和城市');
                return;
            }            
            isRolling = true;
            lotteryBtn.disabled = true;
            lotteryBtn.innerHTML = '<i class="fa fa-spinner fa-spin mr-2"></i> 摇号中...';
            lotteryBtn.classList.remove('bg-secondary', 'hover:bg-secondary/90');
            lotteryBtn.classList.add('bg-gray-500', 'cursor-not-allowed');
            
            // 隐藏结果提示，显示结果容器
            resultMessage.classList.add('hidden');
            platesContainer.classList.remove('hidden');
            platesContainer.innerHTML = '';
            
            // 重置选中状态
            resetSelectedPlates();
            
            // 生成50个车牌，包含1-2个豹子号
            currentPlates = [];
            const luckyCount = Math.floor(Math.random() * 2) + 1; // 1或2个豹子号
            const luckyIndices = new Set();
            
            // 随机选择1-2个位置作为豹子号
            while (luckyIndices.size < luckyCount) {
                luckyIndices.add(Math.floor(Math.random() * 50));
            }
            
            // 生成所有车牌
            for (let i = 0; i < 50; i++) {
                let suffix;
                const isLucky = luckyIndices.has(i);
                
                if (isLucky) {
                    suffix = generateLuckySuffix();
                } else {
                    suffix = generateRandomSuffix();
                }
                
                currentPlates.push({
                    id: `plate-${Date.now()}-${i}`,
                    fullNumber: `${currentPrefix}·${suffix}`,
                    isLucky: isLucky
                });
            }
            
            // 添加动画效果，逐个显示车牌
            let index = 0;
            const displayInterval = setInterval(() => {
                if (index < currentPlates.length) {
                    const plate = currentPlates[index];
                    const plateEl = createPlateElement(plate);
                    platesContainer.appendChild(plateEl);
                    index++;
                } else {
                    clearInterval(displayInterval);
                    
                    // 恢复按钮状态
                    isRolling = false;
                    remainingTimes--;
                    remainingTimesEl.textContent = remainingTimes;
                    
                    lotteryBtn.innerHTML = '<i class="fa fa-random mr-2"></i> 开始摇号';
                    lotteryBtn.classList.remove('bg-gray-500', 'cursor-not-allowed');
                    lotteryBtn.classList.add('bg-secondary', 'hover:bg-secondary/90');
                    
                    if (remainingTimes <= 0) {
                        lotteryBtn.disabled = true;
                        lotteryBtn.classList.remove('bg-secondary', 'hover:bg-secondary/90');
                        lotteryBtn.classList.add('bg-gray-500', 'cursor-not-allowed');
                    }
                    
                    // 启用确认按钮
                    confirmBtn.disabled = false;
                }
            }, 30); // 每个车牌间隔30ms显示，营造滚动效果
        }
        
        // 创建车牌元素
        function createPlateElement(plate) {
            const plateEl = document.createElement('div');
            plateEl.id = plate.id;
            plateEl.className = `plate-item plate-border bg-plate px-2 py-1 text-center rounded cursor-pointer ${plate.isLucky ? '豹子号' : ''}`;
            plateEl.textContent = plate.fullNumber;
            plateEl.addEventListener('click', () => togglePlateSelection(plate.id));
            return plateEl;
        }
        
        // 切换车牌选择状态
        function togglePlateSelection(plateId) {
            const plateEl = document.getElementById(plateId);
            
            if (selectedPlateIds.has(plateId)) {
                // 取消选择
                selectedPlateIds.delete(plateId);
                plateEl.classList.remove('selected');
            } else {
                // 选中
                selectedPlateIds.add(plateId);
                plateEl.classList.add('selected');
            }
            
            // 更新已选号码显示
            updateSelectedPlatesDisplay();
        }
        
        // 更新已选号码显示
        function updateSelectedPlatesDisplay() {
            if (selectedPlateIds.size === 0) {
                selectedPlatesEl.innerHTML = '<p class="text-gray-500 w-full text-center py-3">暂无选中的号码</p>';
                confirmBtn.disabled = true;
                return;
            }
            
            selectedPlatesEl.innerHTML = '';
            confirmBtn.disabled = false;
            
            selectedPlateIds.forEach(plateId => {
                const plate = currentPlates.find(p => p.id === plateId);
                if (plate) {
                    const plateEl = document.createElement('div');
                    plateEl.className = `plate-border bg-plate px-2 py-1 rounded text-sm ${plate.isLucky ? '豹子号' : ''}`;
                    plateEl.innerHTML = `${plate.fullNumber} 
                        <button class="ml-1 text-red-500 hover:text-red-700" onclick="removeSelectedPlate('${plateId}')">
                            <i class="fa fa-times text-xs"></i>
                        </button>`;
                    selectedPlatesEl.appendChild(plateEl);
                }
            });
        }
        
        // 移除已选车牌
        function removeSelectedPlate(plateId) {
            selectedPlateIds.delete(plateId);
            const plateEl = document.getElementById(plateId);
            if (plateEl) {
                plateEl.classList.remove('selected');
            }
            updateSelectedPlatesDisplay();
        }
        
        // 重置选中的车牌
        function resetSelectedPlates() {
            selectedPlateIds.clear();
            currentPlates.forEach(plate => {
                const plateEl = document.getElementById(plate.id);
                if (plateEl) {
                    plateEl.classList.remove('selected');
                }
            });
            updateSelectedPlatesDisplay();
        }
        
        // 确认选择
        function confirmSelection() {
            if (selectedPlateIds.size === 0) return;
            
            // 保存选中的号码到历史记录
            const selectedPlates = currentPlates.filter(plate => selectedPlateIds.has(plate.id));
            saveToHistory(selectedPlates);
            
            // 显示提示
            const toast = document.createElement('div');
            toast.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
            toast.textContent = `已确认选择 ${selectedPlates.length} 个号码`;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('opacity-0', 'transition-opacity', 'duration-300');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 2000);
            
            // 重置选择
            resetSelectedPlates();
        }
        
        // 保存到历史记录
        function saveToHistory(plates) {
            const now = new Date();
            const dateStr = `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')}`;
            const timeStr = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
            
            const record = {
                id: Date.now(),
                date: dateStr,
                time: timeStr,
                prefix: currentPrefix,
                plates: plates.map(p => p.fullNumber)
            };
            
            historyRecords.unshift(record); // 添加到开头
            updateHistoryDisplay();
        }
        
        // 更新历史记录显示
        function updateHistoryDisplay() {
            if (historyRecords.length === 0) {
                historyContainer.innerHTML = '<p class="text-gray-500 text-center py-6">暂无摇号记录</p>';
                return;
            }
            
            historyContainer.innerHTML = '';
            
            historyRecords.forEach(record => {
                const recordEl = document.createElement('div');
                recordEl.className = 'history-item p-3 border border-gray-100 rounded-lg';
                
                let platesHtml = '';
                record.plates.forEach(plate => {
                    platesHtml += `<span class="inline-block plate-border bg-plate px-2 py-1 rounded text-sm mr-2 mb-2">${plate}</span>`;
                });
                
                recordEl.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <p class="font-medium">${record.date} ${record.time}</p>
                        <p class="text-sm text-gray-500">共${record.plates.length}个号码</p>
                    </div>
                    <div class="flex flex-wrap">
                        ${platesHtml}
                    </div>
                `;
                
                historyContainer.appendChild(recordEl);
            });
        }
        
        // 初始化 - 确保页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 确保DOM元素已加载
            if (provinceSelect && citySelect) {
                initProvinceSelect();
                updateHistoryDisplay();
                
                // 绑定按钮事件
        provinceSelect.addEventListener('change', handleProvinceChange);
        lotteryBtn.addEventListener('click', function() {
            console.log('开始摇号按钮被点击');
            console.log('当前状态: isRolling=' + isRolling + ', remainingTimes=' + remainingTimes + ', currentPrefix=' + currentPrefix);
            startLottery();
        });
        confirmBtn.addEventListener('click', confirmSelection);
                
                // 暴露函数到全局，供HTML调用
                window.removeSelectedPlate = removeSelectedPlate;
            } else {
                console.error('页面元素加载失败');
            }
        });
    </script>
</body>
</html>

  </div>

   <footer>

    <div class="meta">
</div>

      
<div class="reward">
  <button><i class="ic i-heartbeat"></i> 赞赏</button>
  <p>请我喝[茶]~(￣▽￣)~*</p>
  <div id="qr">
      
      <div>
        <img data-src="/images/wechatpay.png" alt="杰克飞 微信支付">
        <p>微信支付</p>
      </div>
      
      <div>
        <img data-src="/images/alipay.png" alt="杰克飞 支付宝">
        <p>支付宝</p>
      </div>
      
      <div>
        <img data-src="/images/paypal.png" alt="杰克飞 贝宝">
        <p>贝宝</p>
      </div>
  </div>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>本文作者： </strong>杰克飞 <i class="ic i-at"><em>@</em></i>杰克飞的博客
  </li>
  <li class="link">
    <strong>本文链接：</strong>
    <a href="https://120115.xyz/fixed-license-plate-lottery.html" title="">https://120115.xyz/fixed-license-plate-lottery.html</a>
  </li>
  <li class="license">
    <strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC96aC1DTg=="><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="文章目录">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">机动车车牌摇号系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.1.</span> <span class="toc-text">
                        地区选择
                    </span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.2.</span> <span class="toc-text">
                        摇号须知
                    </span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.3.</span> <span class="toc-text">
                        今日摇号次数
                    </span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.4.</span> <span class="toc-text">摇号操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.5.</span> <span class="toc-text">
                        摇号结果
                    </span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.6.</span> <span class="toc-text">
                        已选号码
                    </span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.7.</span> <span class="toc-text">
                        摇号历史记录
                    </span></a></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="系列文章">
      </div>
      <div class="overview panel" data-title="站点概览">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="杰克飞"
      data-src="/images/source/images/avatar.jpg">
  <p class="name" itemprop="name">杰克飞</p>
  <div class="description" itemprop="description">一个用Hexo搭建的个人博客</div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">13</span>
        <span class="name">文章</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">10</span>
        <span class="name">分类</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">22</span>
        <span class="name">标签</span>
      </a>
    </div>
</nav>

<div class="social">
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>首页</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>关于</a>
  </li>

    
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-feather"></i>文章</a>
  </li>

    
  <li class="item">
    <a href="/links/" rel="section"><i class="ic i-magic"></i>链接</a>
  </li>

    
  <li class="item">
    <a href="/fixed-license-plate-lottery.html" rel="section"><i class="ic i-car"></i>车牌号选号</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>随机文章</h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Java%E5%9F%BA%E7%A1%80/" title="分类于 Java基础">Java基础</a>
<i class="ic i-angle-right"></i>
<a href="/categories/Java%E5%9F%BA%E7%A1%80/%E9%9D%A2%E8%AF%95/" title="分类于 面试">面试</a>
</div>

    <span><a href="/2025/07/21/java%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/" title="java高频面试题">java高频面试题</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Java%E5%9F%BA%E7%A1%80/" title="分类于 Java基础">Java基础</a>
</div>

    <span><a href="/2024/07/21/LangChain4j%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B-Java%E5%BC%80%E5%8F%91AI%E9%A1%B9%E7%9B%AE%EF%BC%8C%E5%A4%AA%E7%88%BD%E4%BA%86%EF%BC%81/" title="LangChain4j实战教程-Java开发AI项目，太爽了！">LangChain4j实战教程-Java开发AI项目，太爽了！</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Java%E5%9F%BA%E7%A1%80/" title="分类于 Java基础">Java基础</a>
<i class="ic i-angle-right"></i>
<a href="/categories/Java%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="分类于 数据结构">数据结构</a>
</div>

    <span><a href="/2025/07/19/HashMap%E7%9A%84put%E6%96%B9%E6%B3%95%E7%9A%84%E5%85%B7%E4%BD%93%E6%B5%81%E7%A8%8B%EF%BC%9F/" title="HashMap的put方法的具体流程？">HashMap的put方法的具体流程？</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/java%E9%9D%A2%E8%AF%95/" title="分类于 java面试">java面试</a>
</div>

    <span><a href="/2024/07/21/%E7%89%9B%E5%AE%A2%E7%A5%9E%E5%93%81%E5%85%AB%E8%82%A1/" title="神品八股-付费14元">神品八股-付费14元</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E9%9A%8F%E7%AC%94/" title="分类于 随笔">随笔</a>
</div>

    <span><a href="/2025/07/18/hello-world/" title="你好，世界">你好，世界</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Java%E5%9F%BA%E7%A1%80/" title="分类于 Java基础">Java基础</a>
<i class="ic i-angle-right"></i>
<a href="/categories/Java%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="分类于 数据结构">数据结构</a>
</div>

    <span><a href="/2025/07/19/ArrayList%E5%BA%95%E5%B1%82%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/" title="ArrayList底层的实现原理是什么？">ArrayList底层的实现原理是什么？</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E7%AE%97%E6%B3%95/" title="分类于 算法">算法</a>
<i class="ic i-angle-right"></i>
<a href="/categories/%E7%AE%97%E6%B3%95/%E5%8A%9B%E6%89%A3/" title="分类于 力扣">力扣</a>
</div>

    <span><a href="/2025/08/01/leetcodeHot100%E5%88%B7%E9%A2%98%E6%96%B9%E5%BC%8F_%E6%95%B4%E7%90%86%E7%89%88/" title="力扣算法Hot100刷题路线">力扣算法Hot100刷题路线</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Java%E5%9F%BA%E7%A1%80/" title="分类于 Java基础">Java基础</a>
<i class="ic i-angle-right"></i>
<a href="/categories/Java%E5%9F%BA%E7%A1%80/%E5%B9%B6%E5%8F%91/" title="分类于 并发">并发</a>
</div>

    <span><a href="/2025/07/19/HashMap-%E6%98%AF%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%90%97%EF%BC%9F/" title="HashMap 是线程安全的吗？">HashMap 是线程安全的吗？</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%B8%B8%E6%88%8F/" title="分类于 游戏">游戏</a>
</div>

    <span><a href="/2024/07/21/%E5%AD%A6%E4%B9%A0%E7%89%88%E6%B8%B8%E6%88%8F%E5%90%88%E9%9B%86/" title="学习版游戏网站">学习版游戏网站</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Java%E5%9F%BA%E7%A1%80/" title="分类于 Java基础">Java基础</a>
<i class="ic i-angle-right"></i>
<a href="/categories/Java%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="分类于 数据结构">数据结构</a>
</div>

    <span><a href="/2025/07/19/HashMap%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%9F/" title="HashMap实现原理？">HashMap实现原理？</a></span>
  </li>

  </ul>
</div>
<div>
  <h2>最新评论</h2>
  <ul class="leancloud-recent-comment">
    <li><span class="comment-author">小明 @ 1天前：</span> 写得真棒！</li>
    <li><span class="comment-author">小红 @ 1天前：</span> 学习了！</li>
    <li><span class="comment-author">路人甲 @ 1天前：</span> 感谢分享！</li>
    <li><span class="comment-author">小王 @ 2天前：</span> 有源码吗？</li>
    <li><span class="comment-author">小李 @ 2天前：</span> 希望多写点Java相关内容！</li>
    <li><span class="comment-author">小张 @ 2天前：</span> 收藏了！</li>
    <li><span class="comment-author">小赵 @ 3天前：</span> 能讲讲ConcurrentHashMap吗？</li>
    <li><span class="comment-author">小陈 @ 3天前：</span> 期待新文章！</li>
    <li><span class="comment-author">小刘 @ 3天前：</span> 讲得很清楚！</li>
    <li><span class="comment-author">小孙 @ 4天前：</span> 能出个Spring专题吗？</li>
    <li><span class="comment-author">小周 @ 4天前：</span> HashMap和HashTable的区别讲得很明白！</li>
    <li><span class="comment-author">小吴 @ 5天前：</span> 面试必备，感谢！</li>
    <li><span class="comment-author">小郑 @ 5天前：</span> 能讲讲JVM吗？</li>
    <li><span class="comment-author">小冯 @ 6天前：</span> 希望多点实战案例！</li>
    <li><span class="comment-author">小朱 @ 6天前：</span> 支持原创！</li>
    <li><span class="comment-author">小何 @ 7天前：</span> 博主回复好快！</li>
    <li><span class="comment-author">小吕 @ 7天前：</span> 内容很详细，赞！</li>
    <li><span class="comment-author">小施 @ 8天前：</span> 请问xxx怎么实现？</li>
    <li><span class="comment-author">小沈 @ 8天前：</span> 文章排版很舒服！</li>
    <li><span class="comment-author">小韩 @ 9天前：</span> 祝博主越来越好！</li>
  </ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">杰克飞 @ 梦想书架</span>
  </div>
  <div class="powered-by">
    基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: 'fixed-license-plate-lottery',
    favicon: {
      show: "（●´3｀●）やれやれだぜ",
      hide: "(´Д｀)大変だ！"
    },
    search : {
      placeholder: "文章搜索",
      empty: "关于 「 ${query} 」，什么也没搜到",
      stats: "${time} ms 内找到 ${hits} 条结果"
    },
    valine: true,fancybox: true,
    copyright: '复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>
<script src="/js/lib/lozad.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/animejs/3.2.0/anime.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/pjax/0.2.8/pjax.min.js"></script>
<script src="/js/lib/quicklink.umd.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/aplayer/1.10.1/APlayer.min.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
